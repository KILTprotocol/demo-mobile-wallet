//
//  EtherCommAdapter.swift
//  ethernom-api
//
//  Created by admin on 20/10/2019.
//  Copyright Â© 2019 admin. All rights reserved.
//

import Foundation

protocol EtherCommAdapter {
  var SCAN_FOREVER: Int {get}
  var _scanAllowDuplicates: Bool { get set }
  var _scanMSecsTimeout: Int64 {get set}
  var _scanStopScanOnWrite: Bool {get set}
  var _foundCards : [CardInfo] {get set}
  
  var CardEventListener: CardListener? {get set}
  var DiscoverServiceEventListener: DiscoverServiceListener? {get set}
  var AdapterEventListener: AdapterListener?{get set}
  func GetInterface() -> TInterface
  
  func GetAdapterAddress() -> String
  func SetAdapterAddress(address: String)
  
  func Discover()
  func StopDiscovery()
  func CardOpen(cardInfo: CardInfo)
  func CardClose()
  
  func SetAdapterEventListener(listener: AdapterListener)
  func SetCardEventListener(listener: CardListener)
  func SetDiscoverServiceEventListener(listener: DiscoverServiceListener)
  func Init(servicePort: UInt8, secsTimeout: Int64,  allowDuplicates: Bool, stopScanOnWrite: Bool)
  func Init_DFU(servicePort: String, secsTimeout: Int64,  allowDuplicates: Bool, stopScanOnWrite: Bool)
  func WriteToCard(buffer: [UInt8])
}

extension EtherCommAdapter {
  var SCAN_FOREVER: Int {
    return -1
  }
  
  var _scanAllowDuplicates: Bool {
    get {
      return false
    }
  }
  
  mutating func SetAdapterEventListener(listener: AdapterListener) {
    self.AdapterEventListener = listener
  }

  mutating func SetCardEventListener(listener: CardListener) {
    self.CardEventListener = listener
  }
  
  mutating func SetDiscoverServiceEventListener(listener: DiscoverServiceListener) {
    self.DiscoverServiceEventListener = listener
  }
}
